spring.application.name=fashion

# Encoding Configuration
#spring.mandatory-file-encoding=UTF-8
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true

# Database Configuration
spring.datasource.url=jdbc:mariadb://localhost:3306/fashion_shop?createDatabaseIfNotExist=true&useUnicode=true&characterEncoding=UTF-8
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver
# Prevent immediate failure if DB is not available
spring.datasource.hikari.initialization-fail-timeout=-1
spring.datasource.continue-on-error=false

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MariaDBDialect
# Defer datasource initialization
spring.jpa.defer-datasource-initialization=true

# JWT Configuration
jwt.secret=your-secret-key-minimum-256-bits-for-HS256-algorithm-security
jwt.access-token-expiration=86400000
jwt.refresh-token-expiration=604800000

# Server Configuration
server.port=8080
server.error.include-message=always
server.error.include-binding-errors=always

# Logging
logging.level.fit.iuh.edu.fashion=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# File Upload Configuration
upload.path=src/main/resources/static/image_product
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.enabled=true

# VNPay Configuration (Sandbox)
vnpay.tmn-code=O83BXNKK
vnpay.hash-secret=FHB77NNVUPY4XS65WSTCWREP7F06JL9V
vnpay.url=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html
# Return URL - Must be registered in VNPay Dashboard
vnpay.return-url=https://econometric-prohibitorily-shirly.ngrok-free.dev/api/payment/vnpay/callback
# IPN URL - For async payment notification
vnpay.ipn-url=https://econometric-prohibitorily-shirly.ngrok-free.dev/api/payment/vnpay/ipn
vnpay.version=2.1.0
vnpay.command=pay
vnpay.order-type=other

# Spring AI - Llama 3.2 Configuration (via OpenAI compatible API)
spring.ai.openai.api-key=lm-studio
# Base URL without /v1 - Spring AI adds it automatically
spring.ai.openai.base-url=http://127.0.0.1:1234
# Use a small, fast local model to reduce latency
spring.ai.openai.chat.options.model=llama-3.2-1b-instruct
spring.ai.openai.chat.options.temperature=0.7
# Gi?m xu?ng 50 tokens ?? ph?n h?i nhanh h?n
spring.ai.openai.chat.options.max-tokens=500
# Gi?m timeout xu?ng 10s
spring.ai.openai.chat.options.timeout=10s

# HTTP Client Timeouts for Spring AI
spring.threads.virtual.enabled=false

# App Chat Configuration
app.chat.default-system=B?n l? tr? l? mua s?m th?i trang. Tr? l?i ng?n g?n, th?n thi?n trong 2-3 c?u.

# Redis Configuration - ENABLED for caching
spring.data.redis.host=localhost
spring.data.redis.port=6380
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# Cache Configuration - Using Redis
spring.cache.type=redis
spring.cache.redis.time-to-live=3600000
spring.cache.redis.cache-null-values=false

# Email Configuration (Gmail)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=homequy001@gmail.com
spring.mail.password=tvxw gzfx ruqy ndqj
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# App Configuration
app.base-url=${APP_BASE_URL:http://localhost:8080}

